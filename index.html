<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-38QETKMKDV"></script>
    <!--Google Adsense -->
    <meta name="google-adsense-account" content="ca-pub-9898426685267130">
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-38QETKMKDV');
    // gtag('config', 'AW-16933125891');

    

    function trackEvent(eventName, eventCategory = 'User Interaction') {
    gtag('event', eventName, {
        event_category: eventCategory
    });
    }

    </script>

    <meta charset="UTF-8">

    <!-- Meta descriptions for SEO -->
    <title>Gold Rate Calculator</title>
<!--     <title>Qa</title>
    <meta name="description" content="Instantly calculate gold price based on purity,weight,making charges and by city in India."> -->
    <meta name="keywords" content="Gold rate,gold rate in India,gold rate today in India,today gold price,gold rate calculator, gold price calculator,18k gold rate, 22k gold rate, 24k gold rate">
    <meta name="author" content="Gold Rate Calculator">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!-- OG tags -->
<!--     <meta property="og:title" content="Gold Rate Calculator - India">
    <meta property="og:description" content="Fast, simple, and accurate gold price calculator for Indian markets.">
    <meta property="og:url" content="https://goldratecalculator.in">
    <meta property="og:image" content="https://api.deepai.org/job-view-file/18cc14c2-ab62-45c3-8e18-71687ce78465/outputs/output.jpg">
    <meta property="og:type" content="website"> -->

    <!-- ✅ Favicon -->
    <link rel="icon" href="https://emoji.aranja.com/static/emoji-data/img-apple-160/2b50.png" type="image/x-icon">
    

  <!-- ✅ Social Card Meta Tags -->
  <meta property="og:title" content="Calculate Gold Rate For FREE" />
  <meta property="og:description" content="FREE online Gold Rate Calculator. Calculate Making charges. Calculate Gold weight price." />
  <meta property="og:image" content="https://i.ibb.co/0g2PM25/og-image.png" />
  <meta property="og:url" content="https://goldratecalculator.in" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Calculate Gold Rate For FREE" />
  <meta name="twitter:description" content="FREE online Gold Rate Calculator. Calculate Making charges. Calculate Gold weight price." />

    <!-- Schema mockup -->
    <script type="application/ld+json">
        {
          "@context": "http://schema.org",
          "@type": "WebApplication",
          "name": "Gold Rate Calculator",
          "url": "https://goldratecalculator.in",
          "description": "Instantly calculate gold price based on purity,weight,making charges and by city in India.",
          "applicationCategory": "FinanceApplication",
          "operatingSystem": "All"
        }
        </script>

    <style>
        body{
            /* background-color: beige; */
            margin: auto;
            /* width: 80%; */

        }
        #container {
            /* background-color: aquamarine; */
            margin: auto;
            width: 80%;
            height: 100vh;
            font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: 16px;
            border-color: black;
            display: flex;
            flex-direction: column;
        }
        #calcArea {
            /* background-color: rgb(182, 180, 255); */
            width: 100%;
            height: 50%;
            display: flex;
            flex-direction: column;
        }
        #summaryArea{
            /* background-color: blueviolet; */
            width: 100%;
            height: 30%;
            margin-top: 20px;
        }
        #ctas {
            width: 100%;
            height: 20%;
            text-align: center;
            margin-top: 10%;  
        }
        input,select {
            margin-right: 0.2em;
            height: 2em;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: 18px;
            color: black;
            border-radius: 0.5em;
            background-color: #E9F1F7;
            margin-top: 0.3em;
            text-align: right;
            /* font-weight: bold; */
        }
        /* making the input fields on right sides */
            .select-wrapper {
            position: relative;
            display: inline-block;
            width: 100%; /* or a fixed width if needed */
            }

            .select-wrapper select {
            width: 100%;
            padding: 0.5em 2em 0.5em 0.5em; /* space for fake arrow */
            text-align: right;
            text-align-last: right; /* helps in some browsers */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: transparent;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
            }

            .select-wrapper::after {
            content: '▾'; /* or ▼ if you like */
            position: absolute;
            right: 0.75em;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #333;
            font-size: 0.8em;
            }




        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        button {
            width: 100%;
            height: 2em;
            border-radius: 2em; 
            background-color: #50FFB1;
            margin-top: 0.5em;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;;
            font-size: 20px;
            
        }
        label {
            font-size: 14px;
            margin-top: 1em;
        }
        .result1,.result2,.result3,.result4{
            display: flex;
            justify-content: space-between;
            width: 100%;
            align-items: center; /* <-- THIS makes both items align vertically */
            height: 1.5em;
            background-color: rgb(255, 255, 255);
            padding: 2%;
        }
        .result1{
            font-size: 1.2em;
            font-weight: bolder;
        }
        .result2,.result4{
            background-color: rgb(215, 216, 216);
        }
        #logo {
            width: 100%;
            font-family: Arial, Helvetica, sans-serif;
            height: 2em;
            font-size: 1.5em;
            text-align: left;
            padding-top: 0.5em;
            font-weight: bold;
            text-align: center;
        }
        #content {
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: 14px;
            text-align: center;
            margin-top: 2em;
            cursor: pointer;
        }
        #lastUpdated {
            font-size: 12px;
            font-style: italic;
            text-align: center;
        }
        .footer {
  margin-top: 60px;
  padding: 20px 0;
  text-align: center;
  background-color: #fff;
  font-size: 14px;
  border-top: 1px solid #ccc;
}

.footer-links {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;
}

.footer-links a {
  text-decoration: none;
  color: #555;
}

.footer-links a:hover {
  color: #b8860b;
  text-decoration: underline;
}


    </style>
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <div id="logo">Gold Rate Calculator</div>
    <div id="container">
       <p id="lastUpdated"></p>
        <p style="text-align: center;">
  <a href="https://forms.gle/HoEAeHRL19qyb5za6"
    target="_blank" onclick="trackEvent('top_banner', 'Advertisement')">
    Please provide Feedback to improve the Calcualator</a></p>
        <button id="installBtn" hidden>Add to Home Screen</button>

        <!-- Add this near your other CTAs -->
        <p style="text-align: center;"><a href="#" id="installLink"
   onclick="trackEvent('pwa_download_clicked','PWA'); handleInstallClick(); return false;">
  Download App 📲
</a></p>


        
        <div id="calcArea">
            <label>Select City</label>
    <select id="inputCity" onchange="updateRate()">
    <option value="India" selected>India</option>
    <option value="Agra">Agra</option>
    <option value="Ahmedabad">Ahmedabad</option>
    <option value="Alappuzha">Alappuzha</option>
    <option value="Amaravati">Amaravati</option>
    <option value="Ambur">Ambur</option>
    <option value="Amravati">Amravati</option>
    <option value="Amritsar">Amritsar</option>
    <option value="Anantapur">Anantapur</option>
    <option value="Arcot">Arcot</option>
    <option value="Ariyalur">Ariyalur</option>
    <option value="Aurangabad">Aurangabad</option>
    <option value="Ayodhya">Ayodhya</option>
    <option value="Bagalkot">Bagalkot</option>
    <option value="Bangalore">Bangalore</option>
    <option value="Belgaum">Belgaum</option>
    <option value="Bellary">Bellary</option>
    <option value="Berhampur">Berhampur</option>
    <option value="Bhadravathi">Bhadravathi</option>
    <option value="Bhiwandi">Bhiwandi</option>
    <option value="Bhopal">Bhopal</option>
    <option value="Bhubaneswar">Bhubaneswar</option>
    <option value="Chandigarh">Chandigarh</option>
    <option value="Chennai">Chennai</option>
    <option value="Chitradurga">Chitradurga</option>
    <option value="Coimbatore">Coimbatore</option>
    <option value="Cuddalore">Cuddalore</option>
    <option value="Cuttack">Cuttack</option>
    <option value="Davanagere">Davanagere</option>
    <option value="Delhi">Delhi</option>
    <option value="Dharmapuri">Dharmapuri</option>
    <option value="Dindigul">Dindigul</option>
    <option value="Erode">Erode</option>
    <option value="Gadag">Gadag</option>
    <option value="Ghaziabad">Ghaziabad</option>
    <option value="Goa">Goa</option>
    <option value="Guntur">Guntur</option>
    <option value="Gurgaon">Gurgaon</option>
    <option value="Guwahati">Guwahati</option>
    <option value="Hosur">Hosur</option>
    <option value="Hyderabad">Hyderabad</option>
    <option value="Indore">Indore</option>
    <option value="Jaipur">Jaipur</option>
    <option value="Jalgaon">Jalgaon</option>
    <option value="Jayankondam">Jayankondam</option>
    <option value="Kadapa">Kadapa</option>
    <option value="Kakinada">Kakinada</option>
    <option value="Kallakurichi">Kallakurichi</option>
    <option value="Kanchipuram">Kanchipuram</option>
    <option value="Kannur">Kannur</option>
    <option value="Kanpur">Kanpur</option>
    <option value="Kanyakumari">Kanyakumari</option>
    <option value="Karaikudi">Karaikudi</option>
    <option value="Karur">Karur</option>
    <option value="Kerala">Kerala</option>
    <option value="Khammam">Khammam</option>
    <option value="Kochi">Kochi</option>
    <option value="Kodaikanal">Kodaikanal</option>
    <option value="Kolar">Kolar</option>
    <option value="Kolhapur">Kolhapur</option>
    <option value="Kolkata">Kolkata</option>
    <option value="Kollam">Kollam</option>
    <option value="Kottayam">Kottayam</option>
    <option value="Kovilpatti">Kovilpatti</option>
    <option value="Kozhikode">Kozhikode</option>
    <option value="Krishnagiri">Krishnagiri</option>
    <option value="Kumbakonam">Kumbakonam</option>
    <option value="Latur">Latur</option>
    <option value="Lucknow">Lucknow</option>
    <option value="Ludhiana">Ludhiana</option>
    <option value="Madurai">Madurai</option>
    <option value="Malappuram">Malappuram</option>
    <option value="Mandya">Mandya</option>
    <option value="Mangalore">Mangalore</option>
    <option value="Meerut">Meerut</option>
    <option value="Mohali">Mohali</option>
    <option value="Mumbai">Mumbai</option>
    <option value="Mysore">Mysore</option>
    <option value="Nagapattinam">Nagapattinam</option>
    <option value="Nagercoil">Nagercoil</option>
    <option value="Nagpur">Nagpur</option>
    <option value="Namakkal">Namakkal</option>
    <option value="Nashik">Nashik</option>
    <option value="Nellore">Nellore</option>
    <option value="Nizamabad">Nizamabad</option>
    <option value="Noida">Noida</option>
    <option value="Ooty">Ooty</option>
    <option value="Palakkad">Palakkad</option>
    <option value="Palani">Palani</option>
    <option value="Paramakudi">Paramakudi</option>
    <option value="Patna">Patna</option>
    <option value="Perambalur">Perambalur</option>
    <option value="Pollachi">Pollachi</option>
    <option value="Pondicherry">Pondicherry</option>
    <option value="Pudukkottai">Pudukkottai</option>
    <option value="Pune">Pune</option>
    <option value="Raipur">Raipur</option>
    <option value="Rajahmundry">Rajahmundry</option>
    <option value="Rajkot">Rajkot</option>
    <option value="Ramanathapuram">Ramanathapuram</option>
    <option value="Rameswaram">Rameswaram</option>
    <option value="Rourkela">Rourkela</option>
    <option value="Salem">Salem</option>
    <option value="Sambalpur">Sambalpur</option>
    <option value="Sivagangai">Sivagangai</option>
    <option value="Solapur">Solapur</option>
    <option value="Surat">Surat</option>
    <option value="Thane">Thane</option>
    <option value="Thanjavur">Thanjavur</option>
    <option value="Theni">Theni</option>
    <option value="Thrissur">Thrissur</option>
    <option value="Tirunelveli">Tirunelveli</option>
    <option value="Tirupati">Tirupati</option>
    <option value="Tirupur">Tirupur</option>
    <option value="Tiruvannamalai">Tiruvannamalai</option>
    <option value="Tiruvarur">Tiruvarur</option>
    <option value="Trichy">Trichy</option>
    <option value="Trivandrum">Trivandrum</option>
    <option value="Tumkur">Tumkur</option>
    <option value="Tuticorin">Tuticorin</option>
    <option value="Vadodara">Vadodara</option>
    <option value="Varanasi">Varanasi</option>
    <option value="Vasai-virar">VasaiVirar</option>
    <option value="Vellore">Vellore</option>
    <option value="Vijayawada">Vijayawada</option>
    <option value="Villupuram">Villupuram</option>
    <option value="Virudhunagar">Virudhunagar</option>
    <option value="Visakhapatnam">Visakhapatnam</option>
    <option value="Warangal">Warangal</option>
              </select>
              

            <label>Quality</label>
            <select id="inputQuality" onchange="updateRate()">
                <option>18K</option>
                <option selected>22K</option>
                <option>24K</option>
            </select>

            <label>Gold cost(INR)</label>
            <input id="inputGramCost" type="number" min="0">

            <label>Weight(grams)</label>
            <input id="inputGrams" type="number"  min="0" value="10" autofocus>

            <label>Making charges(%)</label>
            <input id="inputMakingCharges" type="number" value="24" min="0">

            <button onclick="calculate(); trackEvent('button_Calculate', 'Calculator');">Calculate</button>
        </div>
        <div id="summaryArea">
            <h4 style="text-align: center; text-decoration: underline;">Price Breakup(in INR)</h2>
            <div class="result1">
                <label>Grand Total</label>
                <span id="grandTotal">0</span>
            </div>
            <div class="result2">
                <label>Gold Rate</label>
                <span id="goldRate">0</span>
            </div>
            <div class="result3">
                <label id="labelMakingCharges">Making Charges</label>
                <span id="makingCharges">0</span>
            </div>
            <div class="result4">
                <label>GST(3%)</label>
                <span id="GST">0</span>
            </div>
        </div>
        <div id="ctas">
            <a href="https://wa.me/?text=Check%20out%20Daily%20Gold%20Rates%20and%20Calculate%20Jewellery%20value%20on%20Gold%20Rate%20Calculator%3A%20http%3A%2F%2Flink.goldratecalculator.in%2Fpartner" 
               target="_blank" 
               onclick="trackEvent('share_partner', 'Social Share')">
              Share the link ❤️
            </a>
          </div>
       

        <footer class="footer">
  <div class="footer-links">
    <a href="https://goldratecalculator.in/blog/">Blogs</a>
    <a href="https://goldratecalculator.in/Terms-and-Conditions">Terms & Conditions</a>
    <a href="https://goldratecalculator.in/privacy-policy">Privacy Policy</a>
    <a href="https://forms.gle/v2hrxQeYyvHD8diw8">Contact</a>
  </div>
</footer>

                   
          

    </div>
    <script>
        //lastUpdated getting updated from json file
        fetch("goldRate.json")
    .then(response => response.json())
    .then(data => {
      // Format the date
      const updated = new Date(data.lastUpdated);
      document.getElementById("lastUpdated").textContent =
        "Price Updated: " + updated.toLocaleString("en-IN", {
          weekday: "short",
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit"
        });
    });

// 1) Load the same data from goldRate.json
let goldRate = {};
fetch('goldRate.json', { cache: 'no-store' })
  .then(res => res.json())
  .then(data => {
    goldRate = data;
    updateRate(); // populate the initial gram cost once data is ready
  })
  .catch(err => console.error('Failed to load gold rates:', err));

// 2) Keep the rest of your code exactly as-is (updateRate, calculate, etc.)
function updateRate() {
    const city = document.getElementById("inputCity").value;
    const quality = document.getElementById("inputQuality").value;
    const price = goldRate[city][quality];
    document.getElementById("inputGramCost").value = price;
}

// (Do NOT call updateRate() here anymore; it's called after JSON loads)

//calcualator function code
function calculate(){
    let grams = Number(document.getElementById("inputGrams").value);
    let makingCharges = Number(document.getElementById("inputMakingCharges").value);
    let gramRate = Number(document.getElementById("inputGramCost").value);

    let rateGold = Math.floor(gramRate * grams);
    document.getElementById("goldRate").innerHTML = rateGold.toLocaleString('en-IN');

    let rateMakingCharges = Math.floor(rateGold * makingCharges/100);
    document.getElementById("makingCharges").innerHTML = rateMakingCharges.toLocaleString('en-IN');
    document.getElementById("labelMakingCharges").textContent = `Making Charges (${makingCharges}%)`;

    let rateGST = Math.floor((rateGold + rateMakingCharges) * 0.03);
    document.getElementById("GST").innerHTML = rateGST.toLocaleString('en-IN');

    let rateFinal = rateGold + rateMakingCharges + rateGST;
    document.getElementById("grandTotal").innerHTML = rateFinal.toLocaleString('en-IN');

    window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });

    // gtag('event', 'conversion', {
    //     'send_to': 'AW-16933125891/ZMlBCLyRxM8aEIP-q4o_',
    //     'value': 1.0,
    //     'currency': 'INR'
    // })
}

  
  
        function updateRate() {
            const city = document.getElementById("inputCity").value;
            const quality = document.getElementById("inputQuality").value;
            const price = goldRate[city][quality];
        
            document.getElementById("inputGramCost").value =  price;
        }
        
        updateRate();
        
        
        
        //calcualator function code
        function calculate(){
            let grams = Number(document.getElementById("inputGrams").value);
            let makingCharges = Number(document.getElementById("inputMakingCharges").value);
            let gramRate = Number(document.getElementById("inputGramCost").value);

            let rateGold = Math.floor(gramRate * grams);
            document.getElementById("goldRate").innerHTML = rateGold.toLocaleString('en-IN');

            let rateMakingCharges = Math.floor(rateGold * makingCharges/100);
            document.getElementById("makingCharges").innerHTML = rateMakingCharges.toLocaleString('en-IN');
            document.getElementById("labelMakingCharges").textContent = `Making Charges (${makingCharges}%)`;


            let rateGST = Math.floor((rateGold + rateMakingCharges) * 0.03);
            document.getElementById("GST").innerHTML = rateGST.toLocaleString('en-IN');

            let rateFinal = rateGold + rateMakingCharges + rateGST;
            document.getElementById("grandTotal").innerHTML = rateFinal.toLocaleString('en-IN');
            
            // able to make the page auto scroll to the bottom of hte page
            window.scrollTo({
                top: document.body.scrollHeight,
                behavior: 'smooth'
            
      });
       // Google Ads Conversion Tracking
       // gtag('event', 'conversion', {
       //      'send_to': 'AW-16933125891/ZMlBCLyRxM8aEIP-q4o_',
       //      'value': 1.0,
       //      'currency': 'INR'
       //  })
    }

        //  PWA App code js
        
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('/sw.js');
        }
        
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
          e.preventDefault(); // stop the default mini-info bar
          deferredPrompt = e;
          document.getElementById('installBtn').hidden = false;
        });
        
        document.getElementById('installBtn').addEventListener('click', async () => {
          document.getElementById('installBtn').hidden = true;
          deferredPrompt.prompt();
          const { outcome } = await deferredPrompt.userChoice;
          console.log(`User response: ${outcome}`);
          deferredPrompt = null;
    });

  // Minimal handler that matches your analytics style.
  function handleInstallClick() {
    try {
      // If the browser provided a deferred prompt, show it (must be user gesture — this is one).
      if (window.deferredPrompt) {
        window.deferredPrompt.prompt();
        window.deferredPrompt.userChoice.then(function(choiceResult) {
          if (choiceResult && choiceResult.outcome === 'accepted') {
            trackEvent('pwa_install_accepted', 'PWA');
          } else {
            trackEvent('pwa_install_dismissed', 'PWA');
          }
          // clear it so we don't reuse a stale prompt
          window.deferredPrompt = null;
        }).catch(function(err){
          console.error('deferredPrompt.userChoice error', err);
        });
        return;
      }

      // Fallback: native prompt not available — log it and optionally show short guidance
      trackEvent('pwa_install_prompt_unavailable', 'PWA');
      // Optional UX: show short instructions for Android/iOS
      // For Android Chrome users: menu → "Add to Home screen"
      // For iOS Safari users: Share → "Add to Home Screen"
      if (/iphone|ipad|ipod/i.test(navigator.userAgent)) {
        alert('iPhone: tap Share (⤴) → Add to Home Screen.');
      } else {
        alert('Open Chrome menu → Add to Home screen.');
      }
    } catch (e) {
      console.error('handleInstallClick error', e);
    }
  }

    


        
    </script>

    <!-- ====== Feedback popup using CodePen rating CSS (inserted, no other changes) ====== -->
    <style>
      :root{
        --popup-bg: #ffffff;
        --overlay: rgba(12,14,20,0.45);
        --accent: #f5b301; /* gold */
        --ok: #1e9b4a;
        --muted: #6b7280;
        --card-radius: 14px;
      }

      /* popup shell */
      #grcfb-overlay {
        position: fixed;
        inset: 0;
        background: var(--overlay);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000000;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        animation: fadeIn .18s ease both;
      }
      @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }

      #grcfb-card {
        width: min(520px, 92vw);
        background: var(--popup-bg);
        border-radius: var(--card-radius);
        box-shadow: 0 10px 30px rgba(8,8,12,0.28);
        padding: 18px;
        position: relative;
        transform: translateY(6px);
        animation: popIn .22s cubic-bezier(.2,.9,.3,1) both;
      }
      @keyframes popIn { from { opacity: 0; transform: translateY(12px) scale(.995) } to { opacity:1; transform: translateY(0) scale(1) } }

      #grcfb-close {
        position: absolute;
        right: 12px;
        top: 10px;
        border: 0;
        background: transparent;
        color: #111827;
        font-size: 18px;
        cursor: pointer;
        padding: 6px;
        border-radius: 8px;
      }
      #grcfb-close:hover{ background: rgba(0,0,0,0.04) }

      #grcfb-head { display:flex; align-items:center; gap:12px; }
      #grcfb-title { font-size:16px; font-weight:700; color:#111827; margin:0; }
      #grcfb-sub { font-size:13px; color:var(--muted); margin-top:6px; }

      /* ---------- CodePen rating CSS (scoped) ---------- */
      .grc-star-rating {
        display: inline-block;
        white-space: nowrap;
        line-height: 0; /* collapse gaps */
        user-select: none;
      }

      /* hide native radios */
      .grc-star-rating [type="radio"] {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        position: absolute;
        width: 0;
        height: 0;
        margin: 0;
        padding: 0;
        opacity: 0;
        pointer-events: none;
      }

      .grc-star-rating label {
        display: inline-block;
        cursor: pointer;
        width: 48px;
        height: 48px;
        border-radius: 10px;
        text-align: center;
        vertical-align: middle;
        line-height: 48px;
        font-size: 34px;
        color: #d1d5db;
        transition: transform .18s cubic-bezier(.2,.9,.3,1), color .12s ease, background .12s ease;
        margin: 0 6px;
        box-shadow: inset 0 -1px 0 rgba(255,255,255,0.02);
      }

      /* hover + "sibling hover" effect (using :has fallback where supported) */
      .grc-star-rating label:hover,
      .grc-star-rating label:is(:hover, :has(+ :hover)) {
        transform: translateY(-4px) scale(1.03);
        color: #fffdba;
        animation: grc-jump 0.5s calc(0.05s * var(--i)) alternate infinite;
        background: rgba(0,0,0,0.03);
      }

      @keyframes grc-jump {
        0%,50% { transform: translateY(0) scale(1.03) }
        100% { transform: translateY(-10%) scale(1.03) }
      }

      .grc-star-rating label.checked {
        color: #faec1b;
        text-shadow: 0 0 2px #ffffff, 0 0 10px #ffee58;
        background: linear-gradient(180deg, rgba(245,178,1,0.06), rgba(245,178,1,0.02));
        box-shadow: 0 6px 18px rgba(245,178,1,0.08);
      }

      /* small responsive tweak */
      @media (max-width:420px){
        .grc-star-rating label { width:44px; height:44px; line-height:44px; font-size:30px; margin: 0 5px; }
        #grcfb-card { padding:14px; border-radius:12px; }
      }

      /* ---------- end rating CSS ---------- */

      .grcfb-note { text-align:center; font-size:13px; color:var(--muted); margin-top:8px; }

      /* thank you screen */
      #grcfb-thanks { display:flex; flex-direction:column; align-items:center; gap:10px; padding:8px 6px 4px 6px; }
      .grcfb-tick {
        width:72px; height:72px; border-radius:20px;
        background: linear-gradient(180deg, rgba(30,155,74,0.12), rgba(30,155,74,0.06));
        display:flex; align-items:center; justify-content:center;
        box-shadow: 0 10px 30px rgba(30,155,74,0.06);
      }
      .grcfb-tick svg { width:42px; height:42px; display:block; color:var(--ok); }
      .grcfb-thanks-msg { font-size:16px; font-weight:600; color:#111827; text-align:center }
      .grcfb-thanks-sub { font-size:13px; color:var(--muted); text-align:center }
      .grcfb-close-btn { margin-top:6px; padding:8px 14px; border-radius:10px; border:0; background:var(--ok); color:#fff; font-weight:700; cursor:pointer; box-shadow: 0 6px 18px rgba(30,155,74,0.12); }
    </style>

    <div id="grcfb-overlay" role="dialog" aria-modal="true" aria-labelledby="grcfb-title" style="display:none">
      <div id="grcfb-card" role="document" aria-live="polite">
        <button id="grcfb-close" aria-label="Close feedback popup">&times;</button>

        <!-- Step 1: rating -->
        <div id="grcfb-step1">
          <div id="grcfb-head">
            <div>
              <div id="grcfb-title">Quick rating — one tap</div>
              <div id="grcfb-sub">How would you rate GoldRateCalculator?</div>
            </div>
          </div>

          <div id="grcfb-stars" role="radiogroup" aria-label="Rating 1 to 5">
            <!-- We'll use radio inputs + labels per CodePen style -->
            <form class="grc-star-rating" aria-hidden="false">
              <input type="radio" name="grc-rating" id="grc-rate-1" value="1">
              <label for="grc-rate-1" style="--i:1" data-value="1">★</label>

              <input type="radio" name="grc-rating" id="grc-rate-2" value="2">
              <label for="grc-rate-2" style="--i:2" data-value="2">★</label>

              <input type="radio" name="grc-rating" id="grc-rate-3" value="3">
              <label for="grc-rate-3" style="--i:3" data-value="3">★</label>

              <input type="radio" name="grc-rating" id="grc-rate-4" value="4">
              <label for="grc-rate-4" style="--i:4" data-value="4">★</label>

              <input type="radio" name="grc-rating" id="grc-rate-5" value="5">
              <label for="grc-rate-5" style="--i:5" data-value="5">★</label>
            </form>
          </div>

          <div class="grcfb-note">No accounts, no forms — your click is all we record.</div>
        </div>

        <!-- Step 2: thank you -->
        <div id="grcfb-step2" style="display:none">
          <div id="grcfb-thanks" role="status">
            <div class="grcfb-tick" aria-hidden="true">
              <!-- clean SVG check -->
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="grcfb-thanks-msg">Thanks — rating recorded</div>
            <div class="grcfb-thanks-sub">We really appreciate your feedback.</div>
            <button class="grcfb-close-btn" id="grcfb-thanks-close">Close</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      (function(){
        const overlay = document.getElementById('grcfb-overlay');
        const form = document.querySelector('.grc-star-rating');
        const labels = form ? Array.from(form.querySelectorAll('label')) : [];
        const radios = form ? Array.from(form.querySelectorAll('input[type="radio"]')) : [];
        const step1 = document.getElementById('grcfb-step1');
        const step2 = document.getElementById('grcfb-step2');
        const closeX = document.getElementById('grcfb-close');
        const thanksClose = document.getElementById('grcfb-thanks-close');

        // show to everyone with a tiny delay so gtag has time to init
        window.addEventListener('load', ()=> {
          setTimeout(()=> { overlay.style.display = 'flex'; }, 420);
        });

        // Utility: visually fill labels up to n
        function fillUpTo(n){
          labels.forEach(lbl => {
            const v = Number(lbl.getAttribute('data-value'));
            if(v <= n) lbl.classList.add('checked'); else lbl.classList.remove('checked');
          });
        }

        // send GA event via your helper
        function sendEvent(n){
          try {
            if(typeof trackEvent === 'function'){
              trackEvent(n + '-star', 'User Interaction');
            } else if (typeof gtag === 'function') {
              gtag('event', n + '-star', { event_category: 'User Interaction' });
            } else {
              console.log('rating-event', n + '-star');
            }
          } catch(e){
            console.warn('feedback event error', e);
          }
        }

        // handle selection (radio change)
        radios.forEach(radio => {
          radio.addEventListener('change', (e) => {
            const n = Number(radio.value);
            fillUpTo(n);
            // send GA event (non-blocking)
            sendEvent(n);

            // show thank you
            step1.style.display = 'none';
            step2.style.display = 'block';

            // focus close button
            setTimeout(()=> { if(thanksClose) thanksClose.focus(); }, 60);
          });
        });

        // also allow clicking labels to animate and behave same even if radio change doesn't fire on some odd browsers
        labels.forEach(lbl => {
          lbl.addEventListener('click', (e)=>{
            const n = Number(lbl.getAttribute('data-value'));
            // set radio checked programmatically to ensure change event fires across browsers
            const matching = radios.find(r => Number(r.value) === n);
            if(matching){
              matching.checked = true;
              // trigger change event manually (ensures our handler runs)
              const evt = new Event('change', { bubbles: true });
              matching.dispatchEvent(evt);
            } else {
              fillUpTo(n);
              sendEvent(n);
              step1.style.display = 'none';
              step2.style.display = 'block';
            }
          });
        });

        // close handlers
        closeX.addEventListener('click', ()=> overlay.style.display = 'none');
        thanksClose.addEventListener('click', ()=> overlay.style.display = 'none');
        overlay.addEventListener('click', (e)=> { if(e.target === overlay) overlay.style.display = 'none'; });
        window.addEventListener('keydown', (e)=> { if(e.key === 'Escape') overlay.style.display = 'none'; });

      })();
    </script>
    <!-- ====== end CodePen-styled popup ====== -->

    
</body>
</html>
